<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="297mm"
   height="210mm"
   viewBox="0 0 297 210"
   version="1.1"
   id="svg8"
   inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"
   sodipodi:docname="RayInstancing.svg">
  <defs
     id="defs2">
    <marker
       style="overflow:visible;"
       id="marker1880"
       refX="0.0"
       refY="0.0"
       orient="auto"
       inkscape:stockid="Arrow1Lend"
       inkscape:isstock="true">
      <path
         transform="scale(0.8) rotate(180) translate(12.5,0)"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         id="path1878" />
    </marker>
    <marker
       style="overflow:visible;"
       id="marker1870"
       refX="0.0"
       refY="0.0"
       orient="auto"
       inkscape:stockid="Arrow1Lend"
       inkscape:isstock="true">
      <path
         transform="scale(0.8) rotate(180) translate(12.5,0)"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         id="path1868" />
    </marker>
    <marker
       style="overflow:visible"
       id="Arrow1Lend-3"
       refX="0"
       refY="0"
       orient="auto"
       inkscape:stockid="Arrow1Lend"
       inkscape:isstock="true">
      <path
         transform="matrix(-0.8,0,0,-0.8,-10,0)"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         id="path848-0" />
    </marker>
    <marker
       style="overflow:visible"
       id="Arrow1Lend-3-1"
       refX="0"
       refY="0"
       orient="auto"
       inkscape:stockid="Arrow1Lend"
       inkscape:isstock="true">
      <path
         transform="matrix(-0.8,0,0,-0.8,-10,0)"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         id="path848-0-3" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.98994949"
     inkscape:cx="569.08194"
     inkscape:cy="367.08789"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     inkscape:document-rotation="0"
     showgrid="false"
     inkscape:window-width="1904"
     inkscape:window-height="1001"
     inkscape:window-x="1982"
     inkscape:window-y="19"
     inkscape:window-maximized="0" />
  <metadata
     id="metadata5">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <text
       xml:space="preserve"
       style="font-size:10.6426px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.399098"
       x="9.6378384"
       y="13.524325"
       id="text835"
       transform="scale(0.94064863,1.0630962)"><tspan
         sodipodi:role="line"
         id="tspan833"
         x="9.6378384"
         y="13.524325"
         style="stroke-width:0.399098">Ray Instancing</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:7.05556px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.264583"
       x="16.036171"
       y="26.994225"
       id="text1175"><tspan
         sodipodi:role="line"
         id="tspan1173"
         x="16.036171"
         y="26.994225"
         style="stroke-width:0.264583">Accounting for Transformations</tspan></text>
    <ellipse
       style="fill:none;stroke:#000000;stroke-width:0.200367;stroke-miterlimit:4;stroke-dasharray:none"
       id="path1187"
       cx="115.45978"
       cy="63.743782"
       rx="14.744832"
       ry="13.76438" />
    <ellipse
       style="fill:none;stroke:#000000;stroke-width:0.200367;stroke-miterlimit:4;stroke-dasharray:none"
       id="path1189"
       cx="37.380947"
       cy="92.608887"
       rx="1.4515635"
       ry="2.80633" />
    <path
       style="fill:none;stroke:#000000;stroke-width:0.200053px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1870)"
       d="M 37.610145,92.475255 106.52122,64.679226"
       id="path1191" />
    <text
       xml:space="preserve"
       style="font-size:7.05556px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.264583"
       x="148.33458"
       y="39.021351"
       id="text1207"><tspan
         sodipodi:role="line"
         id="tspan1205"
         x="148.33458"
         y="39.021351"
         style="stroke-width:0.264583">Transformation matrix M = [2 0 0 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="47.840801"
         style="stroke-width:0.264583"
         id="tspan1211">                                         0 1 0 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="56.660252"
         style="stroke-width:0.264583"
         id="tspan1213">                                         0 0 1 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="65.479698"
         style="stroke-width:0.264583"
         id="tspan1215">                                         0 0 0 1]</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="74.299149"
         style="stroke-width:0.264583"
         id="tspan1275" /><tspan
         sodipodi:role="line"
         x="148.33458"
         y="83.118599"
         style="stroke-width:0.264583"
         id="tspan1277">MInv =                            [0.5 0 0 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="91.938049"
         style="stroke-width:0.264583"
         id="tspan1279">                                         0  1 0 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="100.7575"
         style="stroke-width:0.264583"
         id="tspan1281">                                         0  0 1 0</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="109.57695"
         style="stroke-width:0.264583"
         id="tspan1283">                                         0  0 0 1]</tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="118.3964"
         style="stroke-width:0.264583"
         id="tspan1285">              </tspan><tspan
         sodipodi:role="line"
         x="148.33458"
         y="127.21585"
         style="stroke-width:0.264583"
         id="tspan1209">              </tspan></text>
    <text
       xml:space="preserve"
       style="font-size:5.33474px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.200053"
       x="44.892025"
       y="64.262573"
       id="text1225"
       transform="scale(0.75610399,1.3225694)"><tspan
         sodipodi:role="line"
         id="tspan1223"
         x="44.892025"
         y="64.262573"
         style="stroke-width:0.200053">(p0, v)</tspan></text>
    <ellipse
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.264999;stroke-miterlimit:4;stroke-dasharray:none"
       id="path1227"
       cx="27.662395"
       cy="111.98593"
       rx="1.7372519"
       ry="1.8708867" />
    <text
       xml:space="preserve"
       style="font-size:7.05556px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.264583"
       x="29.399649"
       y="136.30745"
       id="text1301"><tspan
         sodipodi:role="line"
         id="tspan1299"
         x="29.399649"
         y="136.30745"
         style="stroke-width:0.264583">1.  p0T = MInv * p0</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="145.12689"
         style="stroke-width:0.264583"
         id="tspan1484">2.  vT = MInv*v</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="153.94635"
         style="stroke-width:0.264583"
         id="tspan1488">3. Ray (p0T, vT) intersect with the untransformed shape</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="162.76579"
         style="stroke-width:0.264583"
         id="tspan1522">    intersects at point p, with ray parameter t; p = p0T + t*vT</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="171.58525"
         style="stroke-width:0.264583"
         id="tspan1930">    get normal n </tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="180.40469"
         style="stroke-width:0.264583"
         id="tspan1709">4. pw = M*p</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="189.22415"
         style="stroke-width:0.264583"
         id="tspan1788">    pw = p0 + t*v</tspan><tspan
         sodipodi:role="line"
         x="29.399649"
         y="198.04359"
         style="stroke-width:0.264583"
         id="tspan1956">5. nw = N*n</tspan></text>
    <ellipse
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.264999;stroke-miterlimit:4;stroke-dasharray:none"
       id="path1227-5"
       cx="101.02788"
       cy="66.55011"
       rx="1.7372519"
       ry="1.8708867" />
    <text
       xml:space="preserve"
       style="font-size:7.05556px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;stroke-width:0.264583"
       x="99.156998"
       y="74.568192"
       id="text1774"><tspan
         sodipodi:role="line"
         id="tspan1772"
         x="99.156998"
         y="74.568192"
         style="stroke-width:0.264583">p</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;marker-end:url(#marker1880)"
       d="M 101.02788,66.550111 79.37905,69.490076"
       id="path1802" />
  </g>
</svg>
